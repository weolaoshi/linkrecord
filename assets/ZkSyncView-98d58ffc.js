import{m as I,_ as F}from"./store-2d2fdf21.js";import{a as g}from"./axios-4a70c6fc.js";import{d as D,a as v,c as A,u as L,o as H}from"./index-64f57e9a.js";import{f as E}from"./units-78654110.js";const q={ethereum:"https://eth.llamarpc.com",optimism:"https://optimism-mainnet.public.blastapi.io",arbitrum:"https://rpc.ankr.com/arbitrum",polygon:"https://polygon-bor.publicnode.com",bsc:"https://bscrpc.com"};function N(o,n){try{let l=parseInt(n,10),t=0,e="Unknown";return o.toString().localeCompare("0")==0?(e="ETH",t=1740*l/10**18):o.toString().localeCompare("2")==0?(e="USDC",t=1*l/10**6):o.toString().localeCompare("4")==0?(e="USDT",t=1*l/10**6):o.toString().localeCompare("15")==0?(e="WBTC",t=27e4*l/10**8):o.toString().localeCompare("173")==0?(e="ZZ",t=.2*l/10**18):o.toString().localeCompare("10")==0?(e="LINK",t=5*l/10**18):t=0,t}catch(l){return console.log("zksync_lite_get_token_volume_by_id() exception, tokenid: "+o+", balance: "+n),console.log(l),0}}async function B(o){try{let n="0x..";return o.length>=4?(n=n+o.substring(o.length-4),{address_trim:n}):{address_trim:o}}catch(n){return console.log("get_trim_address() exception. add:"+o),console.log(n),{address_trim:o}}}async function M(o,n){try{let l=q[n];if(!l)return"Error: Invalid Network Name";let e=(await g.post(l,{jsonrpc:"2.0",method:"eth_getBalance",params:[o,"latest"],id:1})).data.result;return e=parseInt(e,16)/10**18,e=e.toFixed(2),{eth_balance:e}}catch(l){return console.log("eth_main_get_eth_balance() exception. add:"+o),console.log(l),{eth_balance:"Err"}}}async function U(o,n){try{let l=q[n];if(!l)return"Error: Invalid Network Name";const e=(await g.post(l,{jsonrpc:"2.0",method:"eth_getTransactionCount",params:[o,"latest"],id:1})).data.result;return{eth_tx:parseInt(e,16)}}catch(l){return console.log("eth_main_get_tx_count() exception. add:"+o),console.log(l),{eth_tx:"Err"}}}async function Z(o){try{let n="https://zksync2-mainnet-explorer.zksync.io/address/"+o;const l=await g.get(n);let t,e,c,s="0x0000000000000000000000000000000000000000";s in l.data.info.balances?(e=parseInt(l.data.info.balances[s].balance,16)/10**18,e=e.toFixed(2)):e=0;let a="0x3355df6d4c9c3035724fd0e3914de96a5a83aaf4";return a in l.data.info.balances?(c=parseInt(l.data.info.balances[a].balance,16)/10**6,c=c.toFixed(2)):c=0,t=l.data.info.sealedNonce,{zksync_era_tx:t,zksync_era_eth_balance:e,zksync_era_usdc_balance:c}}catch(n){return console.log("zksync_era_get_eth_usdc_balance() exception. add:"+o),console.log(n),{zksync_era_tx:"Error",zksync_era_eth_balance:0,zksync_era_usdc_balance:0}}}async function j(o){try{let n="https://zksync2-mainnet.zkscan.io/api?module=account&action=tokenlist&address="+o;const l=await g.get(n);let t="";if(l.data.message.localeCompare("OK")==0){for(const e of l.data.result){if(e.symbol!=null&&(e.symbol.localeCompare("ETH")==0||e.symbol.localeCompare("USDC")==0))continue;let c=parseInt(e.decimals,10),s=parseInt(e.balance,10)/10**c;t.length>0&&(t=t+" "),t+=e.symbol+" "+s}return{zksync_other_token_list:t}}else return l.data.message.localeCompare("No tokens found")==0?{zksync_other_token_list:"未开通ERA"}:{zksync_other_token_list:l.data.message}}catch(n){return console.log("zksync_era_get_token_list() exception. add:"+o),console.log(n),{zksync_other_token_list:"外部接口不稳"}}}async function W(o){try{let n="https://api.zksync.io/jsrpc";const l=await g.post(n,{id:1,jsonrpc:"2.0",method:"account_info",params:[o]});let t;"ETH"in l.data.result.committed.balances?(t=l.data.result.committed.balances.ETH/10**18,t=t.toFixed(2)):t=0;let e;"USDC"in l.data.result.committed.balances?(e=l.data.result.committed.balances.USDC/10**6,e=e.toFixed(2)):e=0;let c;"ZZ"in l.data.result.committed.balances?(c=l.data.result.committed.balances.ZZ/10**18,c=c.toFixed(2)):c=0;let s="",a;"USDT"in l.data.result.committed.balances&&(a=l.data.result.committed.balances.USDT/10**7,a=a.toFixed(2),s+="USDT "+a+",");let r;"LINK"in l.data.result.committed.balances&&(r=l.data.result.committed.balances.LINK/10**18,r=r.toFixed(2),s+="LINK "+r+",");let _;return"DAI"in l.data.result.committed.balances&&(_=l.data.result.committed.balances.DAI/10**7,_=_.toFixed(2),s+="DAI "+r+","),{zks_tx:l.data.result.committed.nonce,zksync_lite_eth_balance:t,zksync_lite_usdc_balance:e,zksync_lite_zz_balance:c,zksync_list_other_tokens:s}}catch(n){return console.log("zksync_lite_get_token_list(). add:"+o),console.log(n),{zks_tx:"Err",zksync_lite_eth_balance:"Err",zksync_lite_usdc_balance:"Err",zksync_lite_zz_balance:"Err",zksync_list_other_tokens:"Err"}}}async function P(o){try{const n="https://zksync2-mainnet-explorer.zksync.io/transactions",l=await g.get(n,{params:{limit:5,direction:"older",accountAddress:o}});return l.data.total===0?{zksync_era_lastdatetime:null}:{zksync_era_lastdatetime:l.data.list[0].receivedAt}}catch(n){return console.log("zksync_era_get_lastdatetime(). add:"+o),console.log(n),{zksync_era_lastdatetime:null}}}async function K(o){try{let n=null,l=100,t=0,e=0,c=0,s=new Set,a=new Set,r=new Set,_=0,d=0,k=0,y=0,m=0,h=0,f=0;do{let C="https://api.zksync.io/api/v0.1/account/"+o+"/history/"+t.toString()+"/"+l.toString();const u=await g.get(C,{});if(f++,f>1e3)break;e=u.data.length,t+=e;for(const i of u.data){const z=D(i.created_at);s.add(z.format("YYYY-MM-DD")),a.add(z.format("YYYY-ww")),r.add(z.format("YYYY-MM")),i.tx.type.localeCompare("Deposit")==0&&(_++,i.tx.priority_op.token.localeCompare("ETH")==0&&(d+=parseInt(i.tx.priority_op.amount,10))),i.tx.type.localeCompare("Withdraw")==0&&(k++,i.tx.priority_op.token.localeCompare("ETH")==0&&(y+=parseInt(i.tx.priority_op.amount,10))),i.tx!=null&&i.tx.fee!=null&&i.tx.token!=null&&i.tx.fee.localeCompare("0")!=0,i.tx.type.localeCompare("Swap")==0&&(m+=N(i.tx.orders[0].tokenSell,i.tx.orders[0].ratio[0])),n==null&&(n=i.created_at)}}while(e>0);const x=s.size,w=a.size,Y=r.size,S=r.size.toString()+"-"+a.size.toString()+"-"+s.size.toString();d=d/10**18;let b="";_>0&&(b=_.toString()+"-"+d.toString()),y=y/10**18;let p="";return k>0&&(p=k.toString()+"-"+y.toString()),{lite_unique_stat:S,zksync_lite_lastdate:n,zksync_lite_l1_2_l2:b,zksync_lite_l2_2_l1:p,zksync_lite_swap_volume:m.toFixed(0),zksync_litet_fee_total:h.toFixed(2)}}catch(n){return console.log("zksync_lite_get_tx_stat(). add:"+o),console.log(n),{lite_unique_stat:"Err",zksync_lite_lastdate:null,zksync_lite_swap_volume:"",zksync_litet_fee_total:""}}}async function O(o){try{const n="https://zksync2-mainnet-explorer.zksync.io/transactions";let l=0,t=new Set,e=new Set,c=new Set,s=new Set,a=0,r=0,_=0,d=0,k=0,y=null,m=null,h=0;do{const C=await g.get(n,{params:{limit:100,direction:"older",accountAddress:o,fromBlockNumber:m,fromTxIndex:y,offset:k}});h=C.data.total,k+=h;for(const u of C.data.list){m=u.blockNumber,y=u.indexInBlock;const i=D(u.receivedAt);if(l+=parseInt(u.fee,16)/10**18,t.add(u.data.contractAddress),e.add(i.format("YYYY-MM-DD")),c.add(i.format("YYYY-ww")),s.add(i.format("YYYY-MM")),u.isL1Originated===!0){a++;const z=E(u.data.value);r+=parseFloat(z)}else if(u.data.contractAddress==="0x000000000000000000000000000000000000800a"){_++;const z=E(u.data.value);d+=parseFloat(z)}}}while(h>=100);const f=t.size,x=e.size,w=c.size,S=s.size.toString()+"-"+w.toString()+"-"+x.toString();let b="";a>0&&(b=a+"-"+r);let p="";return _>0&&(p=_+"-"+d),{total_fee:l.toFixed(4),unique_contracts_count:f,era_unique_stat:S,zksync_era_bridge_l1_to_l2:b,zksync_era_bridge_l2_to_l1:p}}catch(n){return console.log("zksync_lite_get_tx_stat(). add:"+o),console.log(n),{total_fee:"Error",unique_contracts_count:"Err",era_unique_stat:"Err",zksync_era_bridge_l1_to_l2:"Err",zksync_era_bridge_l2_to_l1:"Err"}}}const T=I("zksync",async o=>Object.assign({},...await Promise.all([M(o,"ethereum"),B(o),U(o,"ethereum"),Z(o),W(o),j(o),O(o),K(o),P(o)]))),$=v({__name:"ZkSyncView",setup(o){T();let n="#99CC99",l="#CCFF66",t="#99CC99",e="#CCFF66",c="#99CC99",s="20px",a="16px",r="12px",_=50,d=50,k=70;const h=[{title:"账号",align:"center",header_style:{backgroundColor:n,fontSize:s},children:[{title:"#",align:"left",key:"#",width:40,header_style:{backgroundColor:n,fontSize:r},cell_style:{backgroundColor:n}},{title:"别名",align:"left",key:"_alias",width:100,custom:!0,header_style:{backgroundColor:n,fontSize:r},cell_style:{backgroundColor:n}},{title:"地址-debank",align:"left",key:"address_trim",ellipsis:!0,header_style:{backgroundColor:n,fontSize:r},url:"https://debank.com/profile/{key}",cell_style:{backgroundColor:n,textDecoration:"underline"}}]},{title:"ETH主网",align:"center",header_style:{backgroundColor:l,fontSize:s},children:[{title:"ETH",align:"center",sort:!0,key:"eth_balance",url:"https://etherscan.io/address/{key}",width:d,header_style:{backgroundColor:l,fontSize:r},cell_style:{backgroundColor:l,textDecoration:"underline"}},{title:"TX",align:"center",key:"eth_tx",url:"https://etherscan.io/address/{key}",sort:!0,width:_,header_style:{backgroundColor:l,fontSize:r},cell_style:{backgroundColor:l,textDecoration:"underline"}}]},{title:"zkSyncEra",align:"center",header_style:{backgroundColor:t,fontSize:s},children:[{title:"交互",align:"center",header_style:{backgroundColor:t,fontSize:a},children:[{title:"最后交互",align:"center",key:"zksync_era_lastdatetime",url:"https://explorer.zksync.io/address/{key}",type:"datetime",sort:!0,header_style:{backgroundColor:t,fontSize:r},cell_style:{backgroundColor:t,textDecoration:"underline"}},{title:"TX",align:"center",key:"zksync_era_tx",url:"https://explorer.zksync.io/address/{key}",sort:!0,width:_,header_style:{backgroundColor:t,fontSize:r},cell_style:{backgroundColor:t,textDecoration:"underline"}}]},{title:"代币",align:"center",header_style:{backgroundColor:t,fontSize:a},children:[{title:"ETH",align:"center",key:"zksync_era_eth_balance",sort:!0,width:d,header_style:{backgroundColor:t,fontSize:r},cell_style:{backgroundColor:t}},{title:"USDC",align:"center",key:"zksync_era_usdc_balance",sort:!0,width:k,header_style:{backgroundColor:t,fontSize:r},cell_style:{backgroundColor:t}},{title:"其他代币",align:"center",key:"zksync_other_token_list",width:100,url:"https://zksync2-mainnet.zkscan.io/api?module=account&action=tokenlist&address={key}",header_style:{backgroundColor:t,fontSize:r},cell_style:{backgroundColor:t,textDecoration:"underline"}}]},{title:"官方桥",align:"center",header_style:{backgroundColor:t,fontSize:a},children:[{title:"入 次数-ETH",align:"center",key:"zksync_era_bridge_l1_to_l2",width:100,sort:!0,header_style:{backgroundColor:t,fontSize:r},cell_style:{backgroundColor:t}},{title:"出 次数-ETH",align:"center",key:"zksync_era_bridge_l2_to_l1",width:100,header_style:{backgroundColor:t,fontSize:r},cell_style:{backgroundColor:t}}]},{title:"活跃统计",header_style:{backgroundColor:t,fontSize:a},children:[{title:"活跃月周日",align:"center",key:"era_unique_stat",header_style:{backgroundColor:t,fontSize:r},cell_style:{backgroundColor:t}},{title:"合约",align:"center",key:"unique_contracts_count",sort:!0,width:50,header_style:{backgroundColor:t,fontSize:r},cell_style:{backgroundColor:t}},{title:"手续费",align:"center",key:"total_fee",sort:!0,header_style:{backgroundColor:t,fontSize:r},cell_style:{backgroundColor:t}}]}]},{title:"zkSyncLite",header_style:{backgroundColor:e,fontSize:s},children:[{title:"交互",align:"center",header_style:{backgroundColor:e,fontSize:a},children:[{title:"最后交互",align:"center",key:"zksync_lite_lastdate",type:"datetime",sort:!0,url:"https://zkscan.io/explorer/accounts/{key}",header_style:{backgroundColor:e,fontSize:r},cell_style:{backgroundColor:e,textDecoration:"underline"}},{title:"TX",align:"center",key:"zks_tx",url:"https://zkscan.io/explorer/accounts/{key}",sort:!0,width:_,header_style:{backgroundColor:e,fontSize:r},cell_style:{backgroundColor:e,textDecoration:"underline"}}]},{title:"代币",align:"center",header_style:{backgroundColor:e,fontSize:a},children:[{title:"ETH",align:"center",key:"zksync_lite_eth_balance",width:d,sort:!0,header_style:{backgroundColor:e,fontSize:r},cell_style:{backgroundColor:e}},{title:"USDC",align:"center",key:"zksync_lite_usdc_balance",width:k,sort:!0,header_style:{backgroundColor:e,fontSize:r},cell_style:{backgroundColor:e}},{title:"ZZ",align:"center",key:"zksync_lite_zz_balance",width:70,sort:!0,header_style:{backgroundColor:e,fontSize:r},cell_style:{backgroundColor:e}},{title:"其他代币",align:"center",key:"zksync_list_other_tokens",width:100,header_style:{backgroundColor:e,fontSize:r},cell_style:{backgroundColor:e}}]},{title:"官方桥",align:"center",header_style:{backgroundColor:e,fontSize:a},children:[{title:"入 次数-ETH",align:"center",key:"zksync_lite_l1_2_l2",header_style:{backgroundColor:e,fontSize:r},cell_style:{backgroundColor:e}},{title:"出 次数-ETH",align:"center",key:"zksync_lite_l2_2_l1",url:"https://zkscan.io/explorer/accounts/{key}",sort:!0,header_style:{backgroundColor:e,fontSize:r},cell_style:{backgroundColor:e}}]},{title:"活跃统计",align:"center",header_style:{backgroundColor:e,fontSize:a},children:[{title:"活跃月周日",align:"center",key:"lite_unique_stat",header_style:{backgroundColor:e,fontSize:r},cell_style:{backgroundColor:e}},{title:"SWAP金额",align:"center",key:"zksync_lite_swap_volume",url:"https://zkscan.io/explorer/accounts/{key}",sort:!0,header_style:{backgroundColor:e,fontSize:r},cell_style:{backgroundColor:e}}]}]},{title:"第3方分析",header_style:{backgroundColor:c,fontSize:s},children:[{title:"byfishh",align:"center",key:"address_trim",url:"https://byfishh.github.io/zk-flow/?address={key}",header_style:{backgroundColor:c,fontSize:r},cell_style:{backgroundColor:c,textDecoration:"underline"}}]}];return(f,x)=>(H(),A(F,{columns:h,store:L(T)()},null,8,["store"]))}});export{$ as default};
