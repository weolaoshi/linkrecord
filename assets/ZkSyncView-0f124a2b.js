import{m as v,_ as F}from"./store-83cc8dea.js";import{a as h}from"./axios-4a70c6fc.js";import{d as I,a as A,c as L,u as H,o as M}from"./index-020756b5.js";import{f as D}from"./units-78654110.js";const Y={ethereum:"https://eth.llamarpc.com",optimism:"https://optimism-mainnet.public.blastapi.io",arbitrum:"https://rpc.ankr.com/arbitrum",polygon:"https://polygon-bor.publicnode.com",bsc:"https://bscrpc.com"};function N(n,l){try{let o=parseInt(l,10),t=0,e="Unknown";return n.toString().localeCompare("0")==0?(e="ETH",t=1740*o/10**18):n.toString().localeCompare("2")==0?(e="USDC",t=1*o/10**6):n.toString().localeCompare("4")==0?(e="USDT",t=1*o/10**6):n.toString().localeCompare("15")==0?(e="WBTC",t=27e4*o/10**8):n.toString().localeCompare("173")==0?(e="ZZ",t=.2*o/10**18):n.toString().localeCompare("10")==0?(e="LINK",t=5*o/10**18):t=0,t}catch(o){return console.log("zksync_lite_get_token_volume_by_id() exception, tokenid: "+n+", balance: "+l),console.log(o),0}}async function B(n){try{let l="0x..";return n.length>=4?(l=l+n.substring(n.length-4),{address_trim:l}):{address_trim:n}}catch(l){return console.log("get_trim_address() exception. add:"+n),console.log(l),{address_trim:n}}}async function U(n,l){try{let o=Y[l];if(!o)return"Error: Invalid Network Name";let e=(await h.post(o,{jsonrpc:"2.0",method:"eth_getBalance",params:[n,"latest"],id:1})).data.result;return e=parseInt(e,16)/10**18,e=e.toFixed(2),{eth_balance:e}}catch(o){return console.log("eth_main_get_eth_balance() exception. add:"+n),console.log(o),{eth_balance:"Err"}}}async function Z(n,l){try{let o=Y[l];if(!o)return"Error: Invalid Network Name";const e=(await h.post(o,{jsonrpc:"2.0",method:"eth_getTransactionCount",params:[n,"latest"],id:1})).data.result;return{eth_tx:parseInt(e,16)}}catch(o){return console.log("eth_main_get_tx_count() exception. add:"+n),console.log(o),{eth_tx:"Err"}}}async function j(n){try{let l="https://zksync2-mainnet-explorer.zksync.io/address/"+n;const o=await h.get(l);let t,e,_,i="0x0000000000000000000000000000000000000000";i in o.data.info.balances?(e=parseInt(o.data.info.balances[i].balance,16)/10**18,e=e.toFixed(2)):e=0;let c="0x3355df6d4c9c3035724fd0e3914de96a5a83aaf4";return c in o.data.info.balances?(_=parseInt(o.data.info.balances[c].balance,16)/10**6,_=_.toFixed(2)):_=0,t=o.data.info.sealedNonce,{zksync_era_tx:t,zksync_era_eth_balance:e,zksync_era_usdc_balance:_}}catch(l){return console.log("zksync_era_get_eth_usdc_balance() exception. add:"+n),console.log(l),{zksync_era_tx:"Error",zksync_era_eth_balance:0,zksync_era_usdc_balance:0}}}async function W(n){try{let l="https://zksync2-mainnet.zkscan.io/api?module=account&action=tokenlist&address="+n;const o=await h.get(l);let t="";if(o.data.message.localeCompare("OK")==0){for(const e of o.data.result){if(e.symbol!=null&&(e.symbol.localeCompare("ETH")==0||e.symbol.localeCompare("USDC")==0))continue;let _=parseInt(e.decimals,10),i=parseInt(e.balance,10)/10**_;t.length>0&&(t=t+" "),t+=e.symbol+" "+i}return{zksync_other_token_list:t}}else return o.data.message.localeCompare("No tokens found")==0?{zksync_other_token_list:"未开通ERA"}:{zksync_other_token_list:o.data.message}}catch(l){return console.log("zksync_era_get_token_list() exception. add:"+n),console.log(l),{zksync_other_token_list:"外部接口不稳"}}}async function P(n){try{let l="https://api.zksync.io/jsrpc";const o=await h.post(l,{id:1,jsonrpc:"2.0",method:"account_info",params:[n]});let t;"ETH"in o.data.result.committed.balances?(t=o.data.result.committed.balances.ETH/10**18,t=t.toFixed(2)):t=0;let e;"USDC"in o.data.result.committed.balances?(e=o.data.result.committed.balances.USDC/10**6,e=e.toFixed(2)):e=0;let _;"ZZ"in o.data.result.committed.balances?(_=o.data.result.committed.balances.ZZ/10**18,_=_.toFixed(2)):_=0;let i="",c;"USDT"in o.data.result.committed.balances&&(c=o.data.result.committed.balances.USDT/10**7,c=c.toFixed(2),i+="USDT "+c+",");let r;"LINK"in o.data.result.committed.balances&&(r=o.data.result.committed.balances.LINK/10**18,r=r.toFixed(2),i+="LINK "+r+",");let u;return"DAI"in o.data.result.committed.balances&&(u=o.data.result.committed.balances.DAI/10**7,u=u.toFixed(2),i+="DAI "+r+","),{zks_tx:o.data.result.committed.nonce,zksync_lite_eth_balance:t,zksync_lite_usdc_balance:e,zksync_lite_zz_balance:_,zksync_list_other_tokens:i}}catch(l){return console.log("zksync_lite_get_token_list(). add:"+n),console.log(l),{zks_tx:"Err",zksync_lite_eth_balance:"Err",zksync_lite_usdc_balance:"Err",zksync_lite_zz_balance:"Err",zksync_list_other_tokens:"Err"}}}async function K(n){try{const l="https://zksync2-mainnet-explorer.zksync.io/transactions",o=await h.get(l,{params:{limit:5,direction:"older",accountAddress:n}});return o.data.total===0?{zksync_era_lastdatetime:null}:{zksync_era_lastdatetime:o.data.list[0].receivedAt}}catch(l){return console.log("zksync_era_get_lastdatetime(). add:"+n),console.log(l),{zksync_era_lastdatetime:null}}}async function O(n){try{let l=null,o=100,t=0,e=0,_=0,i=new Set,c=new Set,r=new Set,u=0,k=0,y=0,g=0,f=0,b=0,d=0;do{let x="https://api.zksync.io/api/v0.1/account/"+n+"/history/"+t.toString()+"/"+o.toString();const m=await h.get(x,{});if(d++,d>1e3)break;e=m.data.length,t+=e;for(const a of m.data){const z=I(a.created_at);i.add(z.format("YYYY-MM-DD")),c.add(z.format("YYYY-ww")),r.add(z.format("YYYY-MM")),a.tx.type.localeCompare("Deposit")==0&&(u++,a.tx.priority_op.token.localeCompare("ETH")==0&&(k+=parseInt(a.tx.priority_op.amount,10))),a.tx.type.localeCompare("Withdraw")==0&&(y++,a.tx.priority_op.token.localeCompare("ETH")==0&&(g+=parseInt(a.tx.priority_op.amount,10))),a.tx!=null&&a.tx.fee!=null&&a.tx.token!=null&&a.tx.fee.localeCompare("0")!=0,a.tx.type.localeCompare("Swap")==0&&(f+=N(a.tx.orders[0].tokenSell,a.tx.orders[0].ratio[0])),l==null&&(l=a.created_at)}}while(e>0);const s=i.size,w=c.size,E=r.size,T=r.size.toString()+"-"+c.size.toString()+"-"+i.size.toString();k=k/10**18;let C="";u>0&&(C=u.toString()+"-"+k.toString()),g=g/10**18;let p="";return y>0&&(p=y.toString()+"-"+g.toString()),{lite_unique_stat:T,zksync_lite_lastdate:l,zksync_lite_l1_2_l2:C,zksync_lite_l2_2_l1:p,zksync_lite_swap_volume:f.toFixed(0),zksync_litet_fee_total:b.toFixed(2)}}catch(l){return console.log("zksync_lite_get_tx_stat(). add:"+n),console.log(l),{lite_unique_stat:"Err",zksync_lite_lastdate:null,zksync_lite_swap_volume:"",zksync_litet_fee_total:""}}}async function X(n){try{const l="https://zksync2-mainnet-explorer.zksync.io/transactions";let o=0,t=new Set,e=new Set,_=new Set,i=new Set,c=0,r=0,u=0,k=0,y=100,g=0,f=null,b=null,d=0;do{const m=await h.get(l,{params:{limit:y,direction:"older",accountAddress:n,fromBlockNumber:b,fromTxIndex:f,offset:g}});d=m.data.total,g+=d,console.log(m.data.toString());for(const a of m.data.list){b=a.blockNumber,f=a.indexInBlock;const z=I(a.receivedAt);if(o+=parseInt(a.fee,16)/10**18,t.add(a.data.contractAddress),e.add(z.format("YYYY-MM-DD")),_.add(z.format("YYYY-ww")),i.add(z.format("YYYY-MM")),a.isL1Originated===!0){c++;const S=D(a.data.value);r+=parseFloat(S)}else if(a.data.contractAddress==="0x000000000000000000000000000000000000800a"){u++;const S=D(a.data.value);k+=parseFloat(S)}}}while(d>=y);const s=t.size,w=e.size,E=_.size,C=i.size.toString()+"-"+E.toString()+"-"+w.toString();let p="";c>0&&(p=c+"-"+r);let x="";return u>0&&(x=u+"-"+k),{total_fee:o.toFixed(4),unique_contracts_count:s,era_unique_stat:C,zksync_era_bridge_l1_to_l2:p,zksync_era_bridge_l2_to_l1:x}}catch(l){return console.log("zksync_lite_get_tx_stat(). add:"+n),console.log(l),{total_fee:"Error",unique_contracts_count:"Err",era_unique_stat:"Err",zksync_era_bridge_l1_to_l2:"Err",zksync_era_bridge_l2_to_l1:"Err"}}}const q=v("zksync",async n=>Object.assign({},...await Promise.all([U(n,"ethereum"),B(n),Z(n,"ethereum"),j(n),P(n),W(n),X(n),O(n),K(n)]))),J=A({__name:"ZkSyncView",setup(n){q();let l="#99CC99",o="#CCFF66",t="#99CC99",e="#CCFF66",_="#99CC99",i="20px",c="16px",r="12px",u=50,k=50,y=70;const b=[{title:"账号",align:"center",header_style:{backgroundColor:l,fontSize:i},children:[{title:"#",align:"left",key:"#",width:40,header_style:{backgroundColor:l,fontSize:r},cell_style:{backgroundColor:l}},{title:"别名",align:"left",key:"_alias",width:100,custom:!0,header_style:{backgroundColor:l,fontSize:r},cell_style:{backgroundColor:l}},{title:"地址-debank",align:"left",key:"address_trim",ellipsis:!0,header_style:{backgroundColor:l,fontSize:r},url:"https://debank.com/profile/{key}",cell_style:{backgroundColor:l,textDecoration:"underline"}}]},{title:"ETH主网",align:"center",header_style:{backgroundColor:o,fontSize:i},children:[{title:"ETH",align:"center",sort:!0,key:"eth_balance",url:"https://etherscan.io/address/{key}",width:k,header_style:{backgroundColor:o,fontSize:r},cell_style:{backgroundColor:o,textDecoration:"underline"}},{title:"TX",align:"center",key:"eth_tx",url:"https://etherscan.io/address/{key}",sort:!0,width:u,header_style:{backgroundColor:o,fontSize:r},cell_style:function(d,s){return s.eth_tx<1?{backgroundColor:o,color:o}:{backgroundColor:o,textDecoration:"underline"}}}]},{title:"zkSyncEra",align:"center",header_style:{backgroundColor:t,fontSize:i},children:[{title:"交互",align:"center",header_style:{backgroundColor:t,fontSize:c},children:[{title:"最后交互",align:"center",key:"zksync_era_lastdatetime",url:"https://explorer.zksync.io/address/{key}",type:"datetime",sort:!0,header_style:{backgroundColor:t,fontSize:r},cell_style:{backgroundColor:t,textDecoration:"underline"}},{title:"TX",align:"center",key:"zksync_era_tx",url:"https://explorer.zksync.io/address/{key}",sort:!0,width:u,header_style:{backgroundColor:t,fontSize:r},cell_style:function(d,s){return s.zksync_era_tx<1?{backgroundColor:t,color:t}:{backgroundColor:t,textDecoration:"underline"}}}]},{title:"代币",align:"center",header_style:{backgroundColor:t,fontSize:c},children:[{title:"ETH",align:"center",key:"zksync_era_eth_balance",sort:!0,width:k,header_style:{backgroundColor:t,fontSize:r},cell_style:function(d,s){return s.zksync_era_eth_balance==0?{backgroundColor:t,color:t}:{backgroundColor:t}}},{title:"USDC",align:"center",key:"zksync_era_usdc_balance",sort:!0,width:y,header_style:{backgroundColor:t,fontSize:r},cell_style:function(d,s){return s.zksync_era_usdc_balance==0?{backgroundColor:t,color:t}:{backgroundColor:t}}},{title:"其他代币",align:"center",key:"zksync_other_token_list",width:100,url:"https://zksync2-mainnet.zkscan.io/api?module=account&action=tokenlist&address={key}",header_style:{backgroundColor:t,fontSize:r},cell_style:{backgroundColor:t,textDecoration:"underline"}}]},{title:"官方桥",align:"center",header_style:{backgroundColor:t,fontSize:c},children:[{title:"入 次数-ETH",align:"center",key:"zksync_era_bridge_l1_to_l2",width:100,sort:!0,header_style:{backgroundColor:t,fontSize:r},cell_style:{backgroundColor:t}},{title:"出 次数-ETH",align:"center",key:"zksync_era_bridge_l2_to_l1",width:100,header_style:{backgroundColor:t,fontSize:r},cell_style:{backgroundColor:t}}]},{title:"活跃统计",header_style:{backgroundColor:t,fontSize:c},children:[{title:"活跃月周日",align:"center",key:"era_unique_stat",header_style:{backgroundColor:t,fontSize:r},cell_style:{backgroundColor:t}},{title:"合约",align:"center",key:"unique_contracts_count",sort:!0,width:50,header_style:{backgroundColor:t,fontSize:r},cell_style:{backgroundColor:t}},{title:"手续费",align:"center",key:"total_fee",sort:!0,header_style:{backgroundColor:t,fontSize:r},cell_style:{backgroundColor:t}}]}]},{title:"zkSyncLite",header_style:{backgroundColor:e,fontSize:i},children:[{title:"交互",align:"center",header_style:{backgroundColor:e,fontSize:c},children:[{title:"最后交互",align:"center",key:"zksync_lite_lastdate",type:"datetime",sort:!0,url:"https://zkscan.io/explorer/accounts/{key}",header_style:{backgroundColor:e,fontSize:r},cell_style:{backgroundColor:e,textDecoration:"underline"}},{title:"TX",align:"center",key:"zks_tx",url:"https://zkscan.io/explorer/accounts/{key}",sort:!0,width:u,header_style:{backgroundColor:e,fontSize:r},cell_style:function(d,s){return s.zks_tx==0?{backgroundColor:e,color:e}:{backgroundColor:e}}}]},{title:"代币",align:"center",header_style:{backgroundColor:e,fontSize:c},children:[{title:"ETH",align:"center",key:"zksync_lite_eth_balance",width:k,sort:!0,header_style:{backgroundColor:e,fontSize:r},cell_style:function(d,s){return s.zksync_lite_eth_balance==0?{backgroundColor:e,color:e}:{backgroundColor:e}}},{title:"USDC",align:"center",key:"zksync_lite_usdc_balance",width:y,sort:!0,header_style:{backgroundColor:e,fontSize:r},cell_style:function(d,s){return s.zksync_lite_usdc_balance==0?{backgroundColor:e,color:e}:{backgroundColor:e}}},{title:"ZZ",align:"center",key:"zksync_lite_zz_balance",width:70,sort:!0,header_style:{backgroundColor:e,fontSize:r},cell_style:function(d,s){return s.zksync_lite_zz_balance==0?{backgroundColor:e,color:e}:{backgroundColor:e}}},{title:"其他代币",align:"center",key:"zksync_list_other_tokens",width:100,header_style:{backgroundColor:e,fontSize:r},cell_style:{backgroundColor:e}}]},{title:"官方桥",align:"center",header_style:{backgroundColor:e,fontSize:c},children:[{title:"入 次数-ETH",align:"center",key:"zksync_lite_l1_2_l2",header_style:{backgroundColor:e,fontSize:r},cell_style:{backgroundColor:e}},{title:"出 次数-ETH",align:"center",key:"zksync_lite_l2_2_l1",url:"https://zkscan.io/explorer/accounts/{key}",sort:!0,header_style:{backgroundColor:e,fontSize:r},cell_style:{backgroundColor:e}}]},{title:"活跃统计",align:"center",header_style:{backgroundColor:e,fontSize:c},children:[{title:"活跃月周日",align:"center",key:"lite_unique_stat",header_style:{backgroundColor:e,fontSize:r},cell_style:function(d,s){return s.lite_unique_stat.localeCompare("0-0-0")==0?{backgroundColor:e,color:e}:{backgroundColor:e}}},{title:"SWAP金额",align:"center",key:"zksync_lite_swap_volume",url:"https://zkscan.io/explorer/accounts/{key}",sort:!0,header_style:{backgroundColor:e,fontSize:r},cell_style:function(d,s){return s.zksync_lite_swap_volume==0?{backgroundColor:e,color:e}:{backgroundColor:e}}}]}]},{title:"第3方分析",header_style:{backgroundColor:_,fontSize:i},children:[{title:"byfishh",align:"center",key:"address_trim",url:"https://byfishh.github.io/zk-flow/?address={key}",header_style:{backgroundColor:_,fontSize:r},cell_style:{backgroundColor:_,textDecoration:"underline"}}]}];return(d,s)=>(M(),L(F,{columns:b,store:H(q)(),"page-size":10},null,8,["store"]))}});export{J as default};
