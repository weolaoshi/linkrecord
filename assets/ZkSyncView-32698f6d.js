import{m as v,_ as F}from"./store-f97d2e07.js";import{a as b}from"./axios-4a70c6fc.js";import{d as I,a as A,c as L,u as H,o as M}from"./index-259be9c1.js";import{f as D}from"./units-78654110.js";const Y={ethereum:"https://eth.llamarpc.com",optimism:"https://optimism-mainnet.public.blastapi.io",arbitrum:"https://rpc.ankr.com/arbitrum",polygon:"https://polygon-bor.publicnode.com",bsc:"https://bscrpc.com"};function N(n,r){try{let o=parseInt(r,10),t=0,e="Unknown";return n.toString().localeCompare("0")==0?(e="ETH",t=1740*o/10**18):n.toString().localeCompare("2")==0?(e="USDC",t=1*o/10**6):n.toString().localeCompare("4")==0?(e="USDT",t=1*o/10**6):n.toString().localeCompare("15")==0?(e="WBTC",t=27e4*o/10**8):n.toString().localeCompare("173")==0?(e="ZZ",t=.2*o/10**18):n.toString().localeCompare("10")==0?(e="LINK",t=5*o/10**18):t=0,t}catch(o){return console.log("zksync_lite_get_token_volume_by_id() exception, tokenid: "+n+", balance: "+r),console.log(o),0}}async function B(n){try{let r="0x..";return n.length>=4?(r=r+n.substring(n.length-4),{address_trim:r}):{address_trim:n}}catch(r){return console.log("get_trim_address() exception. add:"+n),console.log(r),{address_trim:n}}}async function U(n,r){try{let o=Y[r];if(!o)return"Error: Invalid Network Name";let e=(await b.post(o,{jsonrpc:"2.0",method:"eth_getBalance",params:[n,"latest"],id:1})).data.result;return e=parseInt(e,16)/10**18,e=e.toFixed(2),{eth_balance:e}}catch(o){return console.log("eth_main_get_eth_balance() exception. add:"+n),console.log(o),{eth_balance:"Err"}}}async function Z(n,r){try{let o=Y[r];if(!o)return"Error: Invalid Network Name";const e=(await b.post(o,{jsonrpc:"2.0",method:"eth_getTransactionCount",params:[n,"latest"],id:1})).data.result;return{eth_tx:parseInt(e,16)}}catch(o){return console.log("eth_main_get_tx_count() exception. add:"+n),console.log(o),{eth_tx:"Err"}}}async function j(n){try{let r="https://zksync2-mainnet-explorer.zksync.io/address/"+n;const o=await b.get(r);let t,e,_,i="0x0000000000000000000000000000000000000000";i in o.data.info.balances?(e=parseInt(o.data.info.balances[i].balance,16)/10**18,e=e.toFixed(2)):e=0;let s="0x3355df6d4c9c3035724fd0e3914de96a5a83aaf4";return s in o.data.info.balances?(_=parseInt(o.data.info.balances[s].balance,16)/10**6,_=_.toFixed(2)):_=0,t=o.data.info.sealedNonce,{zksync_era_tx:t,zksync_era_eth_balance:e,zksync_era_usdc_balance:_}}catch(r){return console.log("zksync_era_get_eth_usdc_balance() exception. add:"+n),console.log(r),{zksync_era_tx:"Error",zksync_era_eth_balance:0,zksync_era_usdc_balance:0}}}async function W(n){try{let r="https://zksync2-mainnet.zkscan.io/api?module=account&action=tokenlist&address="+n;const o=await b.get(r);let t="";if(o.data.message.localeCompare("OK")==0){for(const e of o.data.result){if(e.symbol!=null&&(e.symbol.localeCompare("ETH")==0||e.symbol.localeCompare("USDC")==0))continue;let _=parseInt(e.decimals,10),i=parseInt(e.balance,10)/10**_;t.length>0&&(t=t+" "),t+=e.symbol+" "+i}return{zksync_other_token_list:t}}else return o.data.message.localeCompare("No tokens found")==0?{zksync_other_token_list:"未开通ERA"}:{zksync_other_token_list:o.data.message}}catch(r){return console.log("zksync_era_get_token_list() exception. add:"+n),console.log(r),{zksync_other_token_list:"外部接口不稳"}}}async function P(n){try{let r="https://api.zksync.io/jsrpc";const o=await b.post(r,{id:1,jsonrpc:"2.0",method:"account_info",params:[n]});let t;"ETH"in o.data.result.committed.balances?(t=o.data.result.committed.balances.ETH/10**18,t=t.toFixed(2)):t=0;let e;"USDC"in o.data.result.committed.balances?(e=o.data.result.committed.balances.USDC/10**6,e=e.toFixed(2)):e=0;let _;"ZZ"in o.data.result.committed.balances?(_=o.data.result.committed.balances.ZZ/10**18,_=_.toFixed(2)):_=0;let i="",s;"USDT"in o.data.result.committed.balances&&(s=o.data.result.committed.balances.USDT/10**7,s=s.toFixed(2),i+="USDT "+s+",");let l;"LINK"in o.data.result.committed.balances&&(l=o.data.result.committed.balances.LINK/10**18,l=l.toFixed(2),i+="LINK "+l+",");let d;return"DAI"in o.data.result.committed.balances&&(d=o.data.result.committed.balances.DAI/10**7,d=d.toFixed(2),i+="DAI "+l+","),{zks_tx:o.data.result.committed.nonce,zksync_lite_eth_balance:t,zksync_lite_usdc_balance:e,zksync_lite_zz_balance:_,zksync_list_other_tokens:i}}catch(r){return console.log("zksync_lite_get_token_list(). add:"+n),console.log(r),{zks_tx:"Err",zksync_lite_eth_balance:"Err",zksync_lite_usdc_balance:"Err",zksync_lite_zz_balance:"Err",zksync_list_other_tokens:"Err"}}}async function K(n){try{const r="https://zksync2-mainnet-explorer.zksync.io/transactions",o=await b.get(r,{params:{limit:5,direction:"older",accountAddress:n}});return o.data.total===0?{zksync_era_lastdatetime:null}:{zksync_era_lastdatetime:o.data.list[0].receivedAt}}catch(r){return console.log("zksync_era_get_lastdatetime(). add:"+n),console.log(r),{zksync_era_lastdatetime:null}}}async function O(n){try{let r=null,o=100,t=0,e=0,_=0,i=new Set,s=new Set,l=new Set,d=0,k=0,g=0,h=0,f=0,m=0,u=0;do{let S="https://api.zksync.io/api/v0.1/account/"+n+"/history/"+t.toString()+"/"+o.toString();const p=await b.get(S,{});if(u++,u>1e3)break;e=p.data.length,t+=e;for(const c of p.data){const z=I(c.created_at);i.add(z.format("YYYY-MM-DD")),s.add(z.format("YYYY-ww")),l.add(z.format("YYYY-MM")),c.tx.type.localeCompare("Deposit")==0&&(d++,c.tx.priority_op.token.localeCompare("ETH")==0&&(k+=parseInt(c.tx.priority_op.amount,10))),c.tx.type.localeCompare("Withdraw")==0&&(g++,c.tx.priority_op.token.localeCompare("ETH")==0&&(h+=parseInt(c.tx.priority_op.amount,10))),c.tx!=null&&c.tx.fee!=null&&c.tx.token!=null&&c.tx.fee.localeCompare("0")!=0,c.tx.type.localeCompare("Swap")==0&&(f+=N(c.tx.orders[0].tokenSell,c.tx.orders[0].ratio[0])),r==null&&(r=c.created_at)}}while(e>0);const a=i.size,y=s.size,E=l.size,T=l.size.toString()+"-"+s.size.toString()+"-"+i.size.toString();k=k/10**18;let x="";d>0&&(x=d.toString()+"-"+k.toString()),h=h/10**18;let C="";return g>0&&(C=g.toString()+"-"+h.toString()),{lite_unique_stat:T,zksync_lite_lastdate:r,zksync_lite_l1_2_l2:x,zksync_lite_l2_2_l1:C,zksync_lite_swap_volume:f.toFixed(0),zksync_litet_fee_total:m.toFixed(2)}}catch(r){return console.log("zksync_lite_get_tx_stat(). add:"+n),console.log(r),{lite_unique_stat:"Err",zksync_lite_lastdate:null,zksync_lite_swap_volume:"",zksync_litet_fee_total:""}}}async function X(n){try{const r="https://zksync2-mainnet-explorer.zksync.io/transactions";let o=0,t=new Set,e=new Set,_=new Set,i=new Set,s=0,l=0,d=0,k=0,g=100,h=0,f=null,m=null,u=0;do{const p=await b.get(r,{params:{limit:g,direction:"older",accountAddress:n,fromBlockNumber:m,fromTxIndex:f,offset:h}});u=p.data.total,h+=u,console.log(p.data.toString());for(const c of p.data.list){m=c.blockNumber,f=c.indexInBlock;const z=I(c.receivedAt);if(o+=parseInt(c.fee,16)/10**18,t.add(c.data.contractAddress),e.add(z.format("YYYY-MM-DD")),_.add(z.format("YYYY-ww")),i.add(z.format("YYYY-MM")),c.isL1Originated===!0){s++;const w=D(c.data.value);l+=parseFloat(w)}else if(c.data.contractAddress==="0x000000000000000000000000000000000000800a"){d++;const w=D(c.data.value);k+=parseFloat(w)}}}while(u>=g);const a=t.size,y=e.size,E=_.size,x=i.size.toString()+"-"+E.toString()+"-"+y.toString();let C="";s>0&&(C=s+"-"+l);let S="";return d>0&&(S=d+"-"+k),{total_fee:o.toFixed(4),unique_contracts_count:a,era_unique_stat:x,zksync_era_bridge_l1_to_l2:C,zksync_era_bridge_l2_to_l1:S}}catch(r){return console.log("zksync_lite_get_tx_stat(). add:"+n),console.log(r),{total_fee:"Error",unique_contracts_count:"Err",era_unique_stat:"Err",zksync_era_bridge_l1_to_l2:"Err",zksync_era_bridge_l2_to_l1:"Err"}}}const q=v("zksync",async n=>Object.assign({},...await Promise.all([U(n,"ethereum"),B(n),Z(n,"ethereum"),j(n),P(n),W(n),X(n),O(n),K(n)]))),J=A({__name:"ZkSyncView",setup(n){q();let r="#99CC99",o="#CCFF66",t="#99CC99",e="#CCFF66",_="#99CC99",i="20px",s="16px",l="12px",d=50,k=50,g=70;const m=[{title:"账号",align:"center",header_style:{backgroundColor:r,fontSize:i},children:[{title:"#",align:"left",key:"#",width:40,header_style:{backgroundColor:r,fontSize:l},cell_style:{backgroundColor:r}},{title:"别名",align:"left",key:"_alias",width:100,custom:!0,header_style:{backgroundColor:r,fontSize:l},cell_style:{backgroundColor:r}},{title:"地址-debank",align:"left",key:"address_trim",ellipsis:!0,header_style:{backgroundColor:r,fontSize:l},url:"https://debank.com/profile/{key}",cell_style:{backgroundColor:r,textDecoration:"underline"}}]},{title:"ETH主网",align:"center",header_style:{backgroundColor:o,fontSize:i},children:[{title:"ETH",align:"center",sort:!0,key:"eth_balance",url:"https://etherscan.io/address/{key}",width:k,header_style:{backgroundColor:o,fontSize:l},cell_style:{backgroundColor:o,textDecoration:"underline"}},{title:"TX",align:"center",key:"eth_tx",url:"https://etherscan.io/address/{key}",sort:!0,width:d,header_style:{backgroundColor:o,fontSize:l},cell_style:function(u,a){try{return a&&a.eth_tx<1?{backgroundColor:o,color:o}:{backgroundColor:o,textDecoration:"underline"}}catch{return{backgroundColor:o,textDecoration:"underline"}}}}]},{title:"zkSyncEra",align:"center",header_style:{backgroundColor:t,fontSize:i},children:[{title:"交互",align:"center",header_style:{backgroundColor:t,fontSize:s},children:[{title:"最后",align:"center",key:"zksync_era_lastdatetime",url:"https://explorer.zksync.io/address/{key}",type:"datetime",sort:!0,header_style:{backgroundColor:t,fontSize:l},cell_style:{backgroundColor:t,textDecoration:"underline"}},{title:"TX",align:"center",key:"zksync_era_tx",url:"https://explorer.zksync.io/address/{key}",sort:!0,width:d,header_style:{backgroundColor:t,fontSize:l},cell_style:function(u,a){try{return a&&a.zksync_era_tx<1?{backgroundColor:t,color:t}:{backgroundColor:t,textDecoration:"underline"}}catch{return{backgroundColor:t,textDecoration:"underline"}}}}]},{title:"代币",align:"center",header_style:{backgroundColor:t,fontSize:s},children:[{title:"ETH",align:"center",key:"zksync_era_eth_balance",sort:!0,width:k,header_style:{backgroundColor:t,fontSize:l},cell_style:function(u,a){try{return a&&a.zksync_era_eth_balance==0?{backgroundColor:t,color:t}:{backgroundColor:t}}catch{return{backgroundColor:t}}}},{title:"USDC",align:"center",key:"zksync_era_usdc_balance",sort:!0,width:g,header_style:{backgroundColor:t,fontSize:l},cell_style:function(u,a){try{return a&&a.zksync_era_usdc_balance==0?{backgroundColor:t,color:t}:{backgroundColor:t}}catch{return{backgroundColor:t}}}},{title:"其他代币",align:"center",key:"zksync_other_token_list",width:100,url:"https://zksync2-mainnet.zkscan.io/api?module=account&action=tokenlist&address={key}",header_style:{backgroundColor:t,fontSize:l},cell_style:{backgroundColor:t,textDecoration:"underline"}}]},{title:"官方桥",align:"center",header_style:{backgroundColor:t,fontSize:s},children:[{title:"入 次数-ETH",align:"center",key:"zksync_era_bridge_l1_to_l2",width:100,sort:!0,header_style:{backgroundColor:t,fontSize:l},cell_style:{backgroundColor:t}},{title:"出 次数-ETH",align:"center",key:"zksync_era_bridge_l2_to_l1",width:100,header_style:{backgroundColor:t,fontSize:l},cell_style:{backgroundColor:t}}]},{title:"活跃统计",header_style:{backgroundColor:t,fontSize:s},children:[{title:"活跃月周日",align:"center",key:"era_unique_stat",header_style:{backgroundColor:t,fontSize:l},cell_style:{backgroundColor:t}},{title:"合约",align:"center",key:"unique_contracts_count",sort:!0,width:50,header_style:{backgroundColor:t,fontSize:l},cell_style:{backgroundColor:t}},{title:"手续费",align:"center",key:"total_fee",sort:!0,header_style:{backgroundColor:t,fontSize:l},cell_style:{backgroundColor:t}}]}]},{title:"zkSyncLite",header_style:{backgroundColor:e,fontSize:i},children:[{title:"交互",align:"center",header_style:{backgroundColor:e,fontSize:s},children:[{title:"最后",align:"center",key:"zksync_lite_lastdate",type:"datetime",sort:!0,url:"https://zkscan.io/explorer/accounts/{key}",header_style:{backgroundColor:e,fontSize:l},cell_style:{backgroundColor:e,textDecoration:"underline"}},{title:"TX",align:"center",key:"zks_tx",url:"https://zkscan.io/explorer/accounts/{key}",sort:!0,width:d,header_style:{backgroundColor:e,fontSize:l},cell_style:function(u,a){try{return a&&a.zks_tx==0?{backgroundColor:e,color:e}:{backgroundColor:e}}catch{return{backgroundColor:e}}}}]},{title:"代币",align:"center",header_style:{backgroundColor:e,fontSize:s},children:[{title:"ETH",align:"center",key:"zksync_lite_eth_balance",width:k,sort:!0,header_style:{backgroundColor:e,fontSize:l},cell_style:function(u,a){try{return a&&a.zksync_lite_eth_balance==0?{backgroundColor:e,color:e}:{backgroundColor:e}}catch{return{backgroundColor:e}}}},{title:"USDC",align:"center",key:"zksync_lite_usdc_balance",width:g,sort:!0,header_style:{backgroundColor:e,fontSize:l},cell_style:function(u,a){try{return a&&a.zksync_lite_usdc_balance==0?{backgroundColor:e,color:e}:{backgroundColor:e}}catch{return{backgroundColor:e}}}},{title:"ZZ",align:"center",key:"zksync_lite_zz_balance",width:70,sort:!0,header_style:{backgroundColor:e,fontSize:l},cell_style:function(u,a){try{return a&&a.zksync_lite_zz_balance==0?{backgroundColor:e,color:e}:{backgroundColor:e}}catch{return{backgroundColor:e}}}},{title:"其他代币",align:"center",key:"zksync_list_other_tokens",width:100,header_style:{backgroundColor:e,fontSize:l},cell_style:{backgroundColor:e}}]},{title:"官方桥",align:"center",header_style:{backgroundColor:e,fontSize:s},children:[{title:"入 次数-ETH",align:"center",key:"zksync_lite_l1_2_l2",header_style:{backgroundColor:e,fontSize:l},cell_style:{backgroundColor:e}},{title:"出 次数-ETH",align:"center",key:"zksync_lite_l2_2_l1",url:"https://zkscan.io/explorer/accounts/{key}",sort:!0,header_style:{backgroundColor:e,fontSize:l},cell_style:{backgroundColor:e}}]},{title:"活跃统计",align:"center",header_style:{backgroundColor:e,fontSize:s},children:[{title:"活跃月周日",align:"center",key:"lite_unique_stat",header_style:{backgroundColor:e,fontSize:l},cell_style:function(u,a){try{return a&&a.lite_unique_stat.localeCompare("0-0-0")==0?{backgroundColor:e,color:e}:{backgroundColor:e}}catch{return{backgroundColor:e}}}},{title:"SWAP金额",align:"center",key:"zksync_lite_swap_volume",url:"https://zkscan.io/explorer/accounts/{key}",sort:!0,header_style:{backgroundColor:e,fontSize:l},cell_style:function(u,a){try{return a&&a.zksync_lite_swap_volume==0?{backgroundColor:e,color:e}:{backgroundColor:e}}catch{return{backgroundColor:e}}}}]}]},{title:"第3方分析",header_style:{backgroundColor:_,fontSize:i},children:[{title:"byfishh",align:"center",key:"address_trim",url:"https://byfishh.github.io/zk-flow/?address={key}",header_style:{backgroundColor:_,fontSize:l},cell_style:{backgroundColor:_,textDecoration:"underline"}}]}];return(u,a)=>(M(),L(F,{columns:m,store:H(q)(),"page-size":10},null,8,["store"]))}});export{J as default};
